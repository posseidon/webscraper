class LanguageManager{constructor(){this.supportedLanguages=["en","hu","vi"],this.defaultLanguage="en",this.currentLanguage=this.detectLanguage(),this.translations={},this.init()}detectLanguage(){var t=localStorage.getItem("quiz-app-language");return t&&this.supportedLanguages.includes(t)||(t=(navigator.language||navigator.languages[0]||this.defaultLanguage).toLowerCase().split("-")[0],this.supportedLanguages.includes(t))?t:this.defaultLanguage}async init(){await this.loadTranslations(),this.applyTranslations(),this.updateLanguageSelector(),this.setupEventListeners()}async loadTranslations(){try{var t,e=await fetch(`/js/translations/${this.currentLanguage}.json`);e.ok?this.translations=await e.json():"en"!==this.currentLanguage&&(t=await fetch("/js/translations/en.json"),this.translations=await t.json())}catch(t){}}translate(t,e=null){return this.translations[t]||e||t}async setLanguage(t){this.supportedLanguages.includes(t)&&(this.currentLanguage=t,localStorage.setItem("quiz-app-language",t),await this.loadTranslations(),this.applyTranslations(),this.updateLanguageSelector())}applyTranslations(){document.querySelectorAll("[data-translate]").forEach(t=>{var e=t.getAttribute("data-translate"),a=t.getAttribute("data-original-text")||t.textContent;t.getAttribute("data-original-text")||t.setAttribute("data-original-text",a);let n=this.translate(e,a);n.includes("{}")&&(e=a.match(/Explore (\w+) topics/))&&(n=n.replace("{}",e[1].toLowerCase())),t.textContent=n}),document.querySelectorAll("[data-translate-placeholder]").forEach(t=>{var e=t.getAttribute("data-translate-placeholder"),a=t.getAttribute("data-original-placeholder")||t.placeholder;t.getAttribute("data-original-placeholder")||t.setAttribute("data-original-placeholder",a),t.placeholder=this.translate(e,a)}),document.querySelectorAll("[data-translate-title]").forEach(t=>{var e=t.getAttribute("data-translate-title"),a=t.getAttribute("data-original-title")||t.title;t.getAttribute("data-original-title")||t.setAttribute("data-original-title",a),t.title=this.translate(e,a)})}updateLanguageSelector(){var t=document.getElementById("language-selector");t&&(t.value=this.currentLanguage)}setupEventListeners(){var t=document.getElementById("language-selector");t&&t.addEventListener("change",t=>{this.setLanguage(t.target.value)}),document.querySelectorAll(".language-option").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();t=e.getAttribute("data-lang");t&&this.setLanguage(t)})});let e=document.getElementById("language-submenu-toggle"),a=document.getElementById("language-submenu"),n=document.getElementById("language-submenu-arrow");e&&a&&n&&e.addEventListener("click",t=>{t.preventDefault(),"true"===e.getAttribute("aria-expanded")?(a.classList.add("hidden"),e.setAttribute("aria-expanded","false"),n.style.transform="rotate(0deg)"):(a.classList.remove("hidden"),e.setAttribute("aria-expanded","true"),n.style.transform="rotate(90deg)")}),document.addEventListener("click",t=>{(t.target.matches("[data-modal-toggle]")||t.target.closest("[data-modal-toggle]"))&&setTimeout(()=>{this.applyTranslations()},100)}),new MutationObserver(t=>{let e=!1;t.forEach(t=>{"childList"===t.type&&t.addedNodes.forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&(t.matches("[data-translate]")||t.querySelector("[data-translate]"))&&(e=!0)})}),e&&setTimeout(()=>this.applyTranslations(),50)}).observe(document.body,{childList:!0,subtree:!0})}getLanguageInfo(){return{code:this.currentLanguage,name:{en:"English",hu:"Magyar",vi:"Tiáº¿ng Viá»‡t"}[this.currentLanguage]||this.currentLanguage}}}function t(t,e=null){return window.languageManager?window.languageManager.translate(t,e):e||t}document.addEventListener("DOMContentLoaded",()=>{window.languageManager=new LanguageManager});