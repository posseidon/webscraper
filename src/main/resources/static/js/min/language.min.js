class LanguageManager{constructor(){this.supportedLanguages=["en","hu","vi"],this.defaultLanguage="en",this.currentLanguage=this.detectLanguage(),this.translations={},this.translationVersion="1.0.0",this.init()}detectLanguage(){var t=localStorage.getItem("quiz-app-language");return t&&this.supportedLanguages.includes(t)||(t=(navigator.language||navigator.languages[0]||this.defaultLanguage).toLowerCase().split("-")[0],this.supportedLanguages.includes(t))?t:this.defaultLanguage}async init(){await this.loadTranslations(),this.applyTranslations(),this.updateLanguageSelector(),this.updateLanguageButton(),this.setupEventListeners()}async loadTranslations(){try{var t,e=await fetch(`${window.location.origin}/js/translations/${this.currentLanguage}.json?v=`+this.translationVersion);e.ok?this.translations=await e.json():"en"!==this.currentLanguage&&(t=await fetch(window.location.origin+"/js/translations/en.json?v="+this.translationVersion),this.translations=await t.json())}catch(t){}}translate(t,e=null){return this.translations[t]||e||t}async setLanguage(t){this.supportedLanguages.includes(t)&&(this.currentLanguage=t,localStorage.setItem("quiz-app-language",t),await this.loadTranslations(),this.applyTranslations(),this.updateLanguageSelector(),this.updateLanguageButton(),t=document.getElementById("language-dropdown-menu"))&&t.classList.add("hidden")}applyTranslations(){document.querySelectorAll("[data-translate]").forEach(t=>{var e=t.getAttribute("data-translate"),a=t.getAttribute("data-original-text")||t.textContent;t.getAttribute("data-original-text")||t.setAttribute("data-original-text",a);let n=this.translate(e,a);n.includes("{}")&&(e=a.match(/Explore (\w+) topics/))&&(n=n.replace("{}",e[1].toLowerCase())),t.textContent=n}),document.querySelectorAll("[data-translate-placeholder]").forEach(t=>{var e=t.getAttribute("data-translate-placeholder"),a=t.getAttribute("data-original-placeholder")||t.placeholder;t.getAttribute("data-original-placeholder")||t.setAttribute("data-original-placeholder",a),t.placeholder=this.translate(e,a)}),document.querySelectorAll("[data-translate-title]").forEach(t=>{var e=t.getAttribute("data-translate-title"),a=t.getAttribute("data-original-title")||t.title;t.getAttribute("data-original-title")||t.setAttribute("data-original-title",a),t.title=this.translate(e,a)})}updateLanguageSelector(){var t=document.getElementById("language-selector");t&&(t.value=this.currentLanguage)}setupEventListeners(){var t=document.getElementById("language-selector");t&&t.addEventListener("change",t=>{this.setLanguage(t.target.value)}),document.querySelectorAll(".language-option").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();t=e.getAttribute("data-lang");t&&this.setLanguage(t)})});let e=document.getElementById("language-submenu-toggle"),a=document.getElementById("language-submenu"),n=document.getElementById("language-submenu-arrow");e&&a&&n&&e.addEventListener("click",t=>{t.preventDefault(),"true"===e.getAttribute("aria-expanded")?(a.classList.add("hidden"),e.setAttribute("aria-expanded","false"),n.style.transform="rotate(0deg)"):(a.classList.remove("hidden"),e.setAttribute("aria-expanded","true"),n.style.transform="rotate(90deg)")}),document.addEventListener("click",t=>{(t.target.matches("[data-modal-toggle]")||t.target.closest("[data-modal-toggle]"))&&setTimeout(()=>{this.applyTranslations()},100)}),new MutationObserver(t=>{let e=!1;t.forEach(t=>{"childList"===t.type&&t.addedNodes.forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&(t.matches("[data-translate]")||t.querySelector("[data-translate]"))&&(e=!0)})}),e&&setTimeout(()=>this.applyTranslations(),50)}).observe(document.body,{childList:!0,subtree:!0})}getLanguageInfo(){return{code:this.currentLanguage,name:{en:"English",hu:"Magyar",vi:"Tiếng Việt"}[this.currentLanguage]||this.currentLanguage}}updateLanguageButton(){var t=this.getLanguageInfo(),e=document.getElementById("selected-language-flag"),a=document.getElementById("language-span");e&&a&&(e.innerHTML=(e={en:`
                    <svg class="w-5 h-5 me-2 rounded-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30">
                        <clipPath id="a"><path d="M0 0v30h60V0z"/></clipPath>
                        <clipPath id="b"><path d="M30 15h30v15zV15H0zH0V0h30z"/></clipPath>
                        <g clip-path="url(#a)">
                            <path d="M0 0v30h60V0z" fill="#00247d"/>
                            <path d="M0 0l60 30M0 30L60 0" stroke="#fff" stroke-width="6"/>
                            <path d="M0 0l60 30M0 30L60 0" clip-path="url(#b)" stroke="#cf142b" stroke-width="4"/>
                            <path d="M30 0v30M0 15h60" stroke="#fff" stroke-width="10"/>
                            <path d="M30 0v30M0 15h60" stroke="#cf142b" stroke-width="6"/>
                        </g>
                    </svg>
                `,hu:`
                    <svg class="w-5 h-5 me-2 rounded-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
                        <path fill="#CE2939" d="M0 0h900v200H0z"/>
                        <path fill="#FFF" d="M0 200h900v200H0z"/>
                        <path fill="#477050" d="M0 400h900v200H0z"/>
                    </svg>
                `,vi:`
                    <svg class="w-5 h-5 me-2 rounded-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 400">
                        <path fill="#da251d" d="M0 0h600v400H0z"/>
                        <path fill="#ff0" d="M300 117.4l56.4 173.2-147.7-107h182.6L243.6 290.6z"/>
                    </svg>
                `})[t.code]||e.en,a.textContent=t.name)}}function t(t,e=null){return window.languageManager?window.languageManager.translate(t,e):e||t}document.addEventListener("DOMContentLoaded",()=>{window.languageManager=new LanguageManager});