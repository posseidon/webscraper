<!DOCTYPE html>
<-- HEADER -->
<nav th:fragment="header" class="bg-white dark:bg-gray-900 fixed w-full z-20 top-0 start-0 border-b border-gray-200 dark:border-gray-600">
    <div class="max-w-screen-xl flex items-center justify-between mx-auto p-4">
        <!-- Navigation when title is null: show home/categories link -->
        <a th:if="${title == null}" id="quiz-app-home" href="/quiz/categories" class="flex items-center space-x-3 rtl:space-x-reverse flex-1 min-w-0">
            <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“š</text></svg>" class="h-8" alt="Quiz App Logo" />
            <div id="header-label-home" class="flex flex-col flex-1 min-w-0" th:with="acategory=${category}, asubcategory=${subcategory}">
                <span th:text="${acategory != null and asubcategory == null ? acategory : (acategory != null and asubcategory != null ? asubcategory : 'Quiz App')}"
                      class="text-sm text-gray-600 dark:text-gray-400 truncate max-w-64"></span>
            </div>
        </a>
        <!-- Navigation when title is available: show quiz play button -->
        <button th:if="${title != null}" id="title-quiz-play-btn" class="flex items-center space-x-3 rtl:space-x-reverse flex-1 min-w-0 bg-transparent border-none cursor-pointer">
            <div class="flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full dark:bg-blue-900">
                <svg class="w-6 h-6 text-blue-600 dark:text-blue-400" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M8 5v14l11-7z"/>
                </svg>
            </div>
            <div id="header-label-quiz" class="flex flex-col flex-1 min-w-0" th:with="acategory=${category}, asubcategory=${subcategory}, atitle=${title}">
                <span th:text="${atitle}"
                      class="text-sm text-gray-600 dark:text-gray-400 truncate max-w-64"></span>
            </div>
        </button>

        <div id="user-menu" class="flex items-center md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse flex-shrink-0">
            <button type="button" class="flex text-sm bg-gray-800 rounded-full md:me-0 focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600" id="user-menu-button" aria-expanded="false" data-dropdown-toggle="user-dropdown" data-dropdown-placement="bottom">
                <span class="sr-only" data-translate="nav.user_menu">Open user menu</span>
                <img class="w-8 h-8 rounded-full" th:src="@{/images/user-icon.png}" alt="Avatar"/>
            </button>
            <!-- Dropdown menu -->
            <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow-sm dark:bg-gray-700 dark:divide-gray-600" id="user-dropdown">
                <div class="px-4 py-3">
                    <span class="block text-sm text-gray-900 dark:text-white">Bonnie & Clyde</span>
                    <span class="block text-sm  text-gray-500 truncate dark:text-gray-400">bonnie@clyde.com</span>
                </div>
                <ul class="py-2" aria-labelledby="user-menu-button">
                    <li>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white" data-translate="nav.dashboard">Dashboard</a>
                    </li>
                    <li>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white" data-translate="nav.settings">Settings</a>
                    </li>
                    <li class="border-t border-gray-100 dark:border-gray-600 pt-2">
                        <button class="flex items-center justify-between w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white" id="language-submenu-toggle" aria-expanded="false">
                            <span data-translate="language.selector_label">Language</span>
                            <svg class="w-4 h-4 transition-transform duration-200" id="language-submenu-arrow" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                            </svg>
                        </button>
                        <div class="hidden pl-8 pr-4 pb-2" id="language-submenu">
                            <div class="space-y-1">
                                <button class="language-option flex items-center w-full px-2 py-1.5 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white rounded" data-lang="en">
                                    <div class="w-5 h-5 rounded-full flex items-center justify-center mr-2 text-lg">
                                        ðŸ‡¬ðŸ‡§
                                    </div>
                                    <span data-translate="language.english">English</span>
                                </button>
                                <button class="language-option flex items-center w-full px-2 py-1.5 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white rounded" data-lang="hu">
                                    <div class="w-5 h-5 rounded-full flex items-center justify-center mr-2 text-lg">
                                        ðŸ‡­ðŸ‡º
                                    </div>
                                    <span data-translate="language.hungarian">Magyar</span>
                                </button>
                                <button class="language-option flex items-center w-full px-2 py-1.5 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white rounded" data-lang="vi">
                                    <div class="w-5 h-5 rounded-full flex items-center justify-center mr-2 text-lg">
                                        ðŸ‡»ðŸ‡³
                                    </div>
                                    <span data-translate="language.vietnamese">Tiáº¿ng Viá»‡t</span>
                                </button>
                            </div>
                        </div>
                    </li>
                    <li class="border-t border-gray-100 dark:border-gray-600 pt-2">
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white" data-translate="nav.signout">Sign out</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>
